<div class="container">
  <h1>{{ isEditMode ? 'Editar Produto' : 'Novo Produto' }}</h1>

  <div *ngIf="error" class="error">
    {{ error }}
  </div>

  <form [formGroup]="productForm" (ngSubmit)="onSubmit()" class="product-form">
    
    <!-- Nome -->
    <div class="form-group">
      <label for="name">Nome *</label>
      <input 
        type="text" 
        id="name" 
        formControlName="name"
        class="form-control"
        [class.invalid]="name?.invalid && name?.touched">
      <div *ngIf="name?.invalid && name?.touched" class="error-message">
        <span *ngIf="name?.errors?.['required']">Nome é obrigatório</span>
        <span *ngIf="name?.errors?.['maxlength']">Máximo de 200 caracteres</span>
      </div>
    </div>

    <!-- Descrição -->
    <div class="form-group">
      <label for="description">Descrição *</label>
      <textarea 
        id="description" 
        formControlName="description"
        class="form-control"
        rows="4"
        [class.invalid]="description?.invalid && description?.touched">
      </textarea>
      <div *ngIf="description?.invalid && description?.touched" class="error-message">
        <span *ngIf="description?.errors?.['required']">Descrição é obrigatória</span>
        <span *ngIf="description?.errors?.['maxlength']">Máximo de 500 caracteres</span>
      </div>
    </div>

    <!-- Preço -->
    <div class="form-group">
      <label for="price">Preço (R$) *</label>
      <input 
        type="number" 
        id="price" 
        formControlName="price"
        class="form-control"
        step="0.01"
        [class.invalid]="price?.invalid && price?.touched">
      <div *ngIf="price?.invalid && price?.touched" class="error-message">
        <span *ngIf="price?.errors?.['required']">Preço é obrigatório</span>
        <span *ngIf="price?.errors?.['min']">Preço deve ser maior que zero</span>
      </div>
    </div>

    <!-- Estoque -->
    <div class="form-group">
      <label for="stock">Estoque *</label>
      <input 
        type="number" 
        id="stock" 
        formControlName="stock"
        class="form-control"
        [class.invalid]="stock?.invalid && stock?.touched">
      <div *ngIf="stock?.invalid && stock?.touched" class="error-message">
        <span *ngIf="stock?.errors?.['required']">Estoque é obrigatório</span>
        <span *ngIf="stock?.errors?.['min']">Estoque não pode ser negativo</span>
      </div>
    </div>

    <!-- Botões -->
    <div class="form-actions">
      <button type="button" class="btn-secondary" (click)="cancel()">
        Cancelar
      </button>
      <button 
        type="submit" 
        class="btn-primary" 
        [disabled]="loading || productForm.invalid">
        {{ loading ? 'Salvando...' : 'Salvar' }}
      </button>
    </div>
  </form>
</div>